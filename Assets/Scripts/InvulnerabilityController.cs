using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class InvulnerabilityController : MonoBehaviour
{

    private RunnerController runnerController;
    private UIController uiController;

    void Awake()
    {
        runnerController = GameObject.FindGameObjectWithTag("Player").GetComponent<RunnerController>();
        uiController = GameObject.FindGameObjectWithTag("UIController").GetComponent<UIController>();
    }
    // Start is called before the first frame update
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        
    }

    IEnumerator OnCollisionEnter2D(Collision2D collision)
    {
        // When colliding with shield player becomes invulnerable
        // aka collisions between player layer (3) and hazards layer (6) are ignored
        Debug.Log("Hit Shield!");
        //uiController.shieldLeft += runnerController.ShieldInvulnerabilityDuration;
        runnerController.isShielded = true;
        Physics2D.IgnoreLayerCollision(3, 6);
        yield return new WaitForSeconds(runnerController.ShieldInvulnerabilityDuration);
        runnerController.isShielded = false;
        Physics2D.IgnoreLayerCollision(3, 6,false);

    }
}
